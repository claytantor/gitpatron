<!DOCTYPE html>
<html>
{% include 'head.html' %}
<script type="text/javascript">

$(document).ready(function() {

        $('button.fix_submit').click(function (e) {
            $(this).find('span').show();
            $(this).find('span').toggleClass('glyphicon-refresh-animate');
            $.ajax({
                type: "POST",
                data: $("#fix_form").serialize(),
                url:"{% url 'fix_form_ajax' %}",
                success:function(result){
                    $("#fix_form_ajax").html(result);
                }
            });

        });

    $('button.fixed_claimed_issue').click(function (e) {
        params = { fixed_issue_id:$(this).data('fixed') } ;
        $.ajax({
            url:"{% url 'fix_form_ajax' %}",
            data:params,
            success:function(result){
                $("#fix_form_ajax").html(result);
                $('#fix_modal').modal({});
            }
        });
    });


});

</script>
<body>
    {% include 'topbar.html' %}
    <div class="container" style="margin-top: 60px;">

        <div class="row">
            <h1>Claimed Issues</h1>
            Issues Claimed: {{ claimed.all|length }}
            <div class="col-md-12">
                {% include 'claimed_table.html' %}
            </div>
        </div>

        <footer style="margin-top: 60px;">
            <p>&copy; gitpatron 2014</p>
        </footer>
    </div> <!-- /container -->
<!-- Modal -->
    <div class="modal fade" id="fix_modal" tabindex="-1" role="dialog" aria-labelledby="fix_modal_label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="fix_modal_label">Monetize fix</h4>
              <p>You are proving you have fixed the issue by submitting your commit id and setting the
                  donation you would like to accept for the fix.</p>
          </div>
          <div class="modal-body" id="fix_form_ajax">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary fix_submit">Save changes</button>
          </div>
        </div>
      </div>
    </div>
</body>
</html>
